<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="/techblog/js/pace.min.js"></script>
    <link rel="stylesheet" href="/techblog/css/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>accompanyi | Tech Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="JerseyNettyInfluxDBJAVA8JAVA9HTTPREST" />
  
  
  
  
  <meta name="description" content="소개개발을 꾸준히 하기위해 단련을 하는중이다. 그 과정을 블로그로 남기려 부족하지만 차근차근 글을 써나가 보려한다. 내가 맡은 일은 사내에있는 통합모니터링 시스템 재구축(쥬피터 고도화)이라는 프로젝트에 개발자로 포함되어있다. 이중 맡은 업무는 API 서버 담당이였다. 기존 웹개발만 깨작거리다 API서버에대해 제대로 고민하고 만들려한건 처음이라 많은 걱정이">
<meta name="keywords" content="Jersey,Netty,InfluxDB,JAVA8,JAVA9,HTTP,REST">
<meta property="og:type" content="article">
<meta property="og:title" content="accompanyi">
<meta property="og:url" content="https://gsneotek-wisen.github.io/2018/05/04/accompanyi/index.html">
<meta property="og:site_name" content="Tech Blog">
<meta property="og:description" content="소개개발을 꾸준히 하기위해 단련을 하는중이다. 그 과정을 블로그로 남기려 부족하지만 차근차근 글을 써나가 보려한다. 내가 맡은 일은 사내에있는 통합모니터링 시스템 재구축(쥬피터 고도화)이라는 프로젝트에 개발자로 포함되어있다. 이중 맡은 업무는 API 서버 담당이였다. 기존 웹개발만 깨작거리다 API서버에대해 제대로 고민하고 만들려한건 처음이라 많은 걱정이">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-05-04T06:39:07.090Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="accompanyi">
<meta name="twitter:description" content="소개개발을 꾸준히 하기위해 단련을 하는중이다. 그 과정을 블로그로 남기려 부족하지만 차근차근 글을 써나가 보려한다. 내가 맡은 일은 사내에있는 통합모니터링 시스템 재구축(쥬피터 고도화)이라는 프로젝트에 개발자로 포함되어있다. 이중 맡은 업무는 API 서버 담당이였다. 기존 웹개발만 깨작거리다 API서버에대해 제대로 고민하고 만들려한건 처음이라 많은 걱정이">
  
    <link rel="alternate" href="/atom.xml" title="Tech Blog" type="application/atom+xml">
  
  <link rel="icon" href="/techblog/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/techblog/css/style.css">

  <script src="/techblog/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/techblog/css/bootstrap.css" >
  <link rel="stylesheet" href="/techblog/css/hiero.css" >
  <link rel="stylesheet" href="/techblog/css/glyphs.css" >
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/techblog/css/my.css">
  <!-- Google Adsense -->
  
</head>

<script>
var themeMenus = {};

  themeMenus["/techblog/"] = "Home"; 

  themeMenus["/techblog/archives"] = "Archives"; 

  themeMenus["/techblog/categories"] = "Categories"; 

  themeMenus["/techblog/tags"] = "Tags"; 

  themeMenus["/techblog/about"] = "About"; 

</script>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/techblog/" title="Tech Blog" rel="home"> Tech Blog </a>
            
          </h1>

          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/techblog/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/techblog/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/techblog/categories">Categories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/techblog/tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/techblog/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt="" src="">
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://source.unsplash.com/collection/954550/1920x1080".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/techblog/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-accompanyi" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      accompanyi
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/techblog/2018/05/04/accompanyi/" class="article-date">
	  <time datetime="2018-05-04T06:27:24.467Z" itemprop="datePublished">May 4, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="소개"><a href="#소개" class="headerlink" title="소개"></a>소개</h3><p>개발을 꾸준히 하기위해 단련을 하는중이다. 그 과정을 블로그로 남기려 부족하지만 차근차근 글을 써나가 보려한다. 내가 맡은 일은 사내에있는 통합모니터링 시스템 재구축(쥬피터 고도화)이라는 프로젝트에 개발자로 포함되어있다. 이중 맡은 업무는 API 서버 담당이였다. 기존 웹개발만 깨작거리다 API서버에대해 제대로 고민하고 만들려한건 처음이라 많은 걱정이 앞섰지만 그래도 시작하였다.</p>
<h3 id="선행조건"><a href="#선행조건" class="headerlink" title="선행조건"></a>선행조건</h3><p> 스터디를 위해서 선행조선이 제시되었다. 웹프레임워크는 사용하지말것, 네트워크관련 프레임워크, HTTP관련 라이브러리는 사용가능. 만약 기간을 맞추지 못한다면 수단방법 가리지말고 <strong>무조건 작동하게 만들것. </strong></p>
<h3 id="요구사항"><a href="#요구사항" class="headerlink" title="요구사항"></a>요구사항</h3><p>기간을 입력받아 InfluxDB에 있는 시계열 시스템이용수치를 제공하는 RESTFul API 작성</p>
<h3 id="기초공부"><a href="#기초공부" class="headerlink" title="기초공부"></a>기초공부</h3><p>사실 REST를 개발을해봤다고하지만.. 정확한 개념을 이해하고 쓰지 않았던거 같아 다시 찾아봤다.</p>
<ul>
<li>REST(Representational State Transfer) : HTTP를 이용한 CRUD를 용이하게 처리하기위한  API 디자인</li>
<li>네트워크 프레임워크(서버프레임워크로 연관검색 됨)<ul>
<li>Netty</li>
</ul>
</li>
<li>웹서버 프레임워크(웹컨테이너로 연관검색 됨)<ul>
<li>Tomcat, Resin, WebLogic, Jeus, Jetty, WebSphere, JBOSS</li>
</ul>
</li>
<li>HTTP 라이브러리<ul>
<li>Jersey</li>
</ul>
</li>
</ul>
<h3 id="프로젝트-구성"><a href="#프로젝트-구성" class="headerlink" title="프로젝트 구성"></a>프로젝트 구성</h3><p>선행조건과 요구사항을 부합하기위해 Jersey + Netty 조건으로 JDK8로 선택하였으며, 프로젝트는 gradle 로 결정.</p>
<p>Netty는 HTTP 프로토콜을 처리해서 받고, Jersey는 Restful API 관련 핸들러를 이용해서 메시지를 처리하게끔 프로젝트를 구성.</p>
<h3 id="의존성"><a href="#의존성" class="headerlink" title="의존성"></a>의존성</h3><ul>
<li><code>Netty</code> 5.0.0.Alpha1</li>
<li><code>Jersey-server</code> 2.7</li>
<li><code>Influxdb-java</code> 2.9</li>
<li><code>Gson</code> 2.8.2</li>
</ul>
<p>※ Jersey라이브러리에서 <code>Jaxb-api</code> 를 참조하고있는데, JAXB API는 Java EE API로 간주되므로 더 이상 Java SE 9의 기본 클래스 경로에 포함되지 않아 Java9에서 사용할경우 <code>Jaxb-api</code> 추가해야한다.</p>
<p>※ <code>Jersey-server</code>라이브러리  최신버전은 작성일 기준 2.27이 최신버전이였다. 최신버전을 사용시 <code>InjectionManagerFactory not found.</code> 라는 에러가 발생하였다. 이에러는 <code>jersey-hk2</code> 를 추가해서 해결했었다. 하지만 2.7버전에서는 문제없이 사용가능하길래 2.7로 다운그레이드하여 작업하였다.</p>
<h3 id="개발내용"><a href="#개발내용" class="headerlink" title="개발내용"></a>개발내용</h3><ol>
<li><p>Netty ServerBootstrap 생성</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HttpServer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//bossGroup 클라이언트 연결을 수락하는 부모 스레드 그룹</span></span><br><span class="line">        <span class="comment">//NioEventLoopGroup(인수) 스레드 그룹 내에서 생성할 최대 스레드 수</span></span><br><span class="line">        bossGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//연결된 클라이언트 소켓으로부터 데이터 입출력(I/O) 및 이벤트처리 담당하는 자식 쓰레드 그룹</span></span><br><span class="line">        <span class="comment">//인수가 없으면 CPU 코어 수에 따른 쓰레드의 수 결정.</span></span><br><span class="line">        workerGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        <span class="comment">//부트 스트랩 객체 생성</span></span><br><span class="line">        bootstrap = <span class="keyword">new</span> ServerBootstrap();</span><br><span class="line">        <span class="comment">//스레드 그룹 초기화</span></span><br><span class="line">        bootstrap.group(bossGroup, workerGroup);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//채널 초기화</span></span><br><span class="line">        bootstrap.channel(NioServerSocketChannel.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//자식 채널의 초기화</span></span><br><span class="line">        bootstrap.childHandler(<span class="keyword">new</span> HttpServerInitializer());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ChannelInitializer 및 Jersey Handler생성</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpServerInitializer</span> <span class="keyword">extends</span> <span class="title">ChannelInitializer</span>&lt;<span class="title">SocketChannel</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MESSAGE_SIZE = <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ChannelHandler jerseyHandler;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//클라이언트로부터 연결된 채널이 초기화 될때의 기본동작이 지정된 추상 클래스</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HttpServerInitializer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    	 jerseyHandler = createJerseyHandler();</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        ChannelPipeline p = ch.pipeline();</span><br><span class="line">        p.addLast(<span class="string">"codec"</span>, <span class="keyword">new</span> HttpServerCodec());</span><br><span class="line">        <span class="comment">//POST 처리를 하려면 사이즈를 지정해줘야한다.</span></span><br><span class="line">        p.addLast(<span class="string">"aggregator"</span>, <span class="keyword">new</span> HttpObjectAggregator(MESSAGE_SIZE));</span><br><span class="line">        p.addLast(<span class="string">"jerseyHandler"</span>, jerseyHandler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ChannelHandler <span class="title">createJerseyHandler</span><span class="params">()</span> </span>&#123;   	</span><br><span class="line">        ResourceConfig resourceConfig = <span class="keyword">new</span> ResourceConfig().registerClasses(NettyEndpoint.class);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JerseyHandler(<span class="keyword">new</span> ApplicationHandler(resourceConfig));</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>EndPoint  생성(Method 처리)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Singleton</span></span><br><span class="line"><span class="meta">@Path</span>(<span class="string">"/api"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NettyEndpoint</span> </span>&#123;</span><br><span class="line">	<span class="meta">@GET</span><span class="meta">@Path</span>(<span class="string">"/&#123;param&#125;"</span>)</span><br><span class="line">    <span class="meta">@Produces</span>(MediaType.APPLICATION_JSON)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Response <span class="title">getMsg</span><span class="params">(@PathParam(<span class="string">"param"</span>)</span> String msg, </span></span><br><span class="line"><span class="function">				    		@<span class="title">QueryParam</span><span class="params">(<span class="string">"startTime"</span>)</span> String startTime,</span></span><br><span class="line"><span class="function">				    		@<span class="title">QueryParam</span><span class="params">(<span class="string">"endTime"</span>)</span> String endTime) </span>&#123;</span><br><span class="line">		<span class="comment">//get Message 처리</span></span><br><span class="line">        ...</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//DB 연결생성    </span></span><br><span class="line">    	InfluxDb db = <span class="keyword">new</span> InfluxDb();		</span><br><span class="line">		</span><br><span class="line">        <span class="comment">//json String Return</span></span><br><span class="line">        String ret = db.select(parms);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> Response.status(Status.OK).entity(ret).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>DB조회</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InfluxDb</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> InfluxDB influxDB = <span class="keyword">null</span>;</span><br><span class="line">   	<span class="keyword">private</span> String dbName;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//connect</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">InfluxDb</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">this</span>.influxDB = connectDB(url, userId, userPwd);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connectDB</span><span class="params">(String url, String userName, String password)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> InfluxDBFactory.connect(url, userName, password);		</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">select</span><span class="params">(parameter parms)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	<span class="comment">//dbselect </span></span><br><span class="line">		Query query = <span class="keyword">new</span> Query(queryStr, dbName);</span><br><span class="line">   		QueryResult queryResult = influxDB.query(query);</span><br><span class="line"></span><br><span class="line">    	InfluxDBResultMapper resultMapper = <span class="keyword">new</span> InfluxDBResultMapper();</span><br><span class="line">         </span><br><span class="line">         <span class="comment">//cpu == db구조에맞게 생성된 POJO class</span></span><br><span class="line">    	List&lt;cpu&gt; cpuList = resultMapper.toPOJO(queryResult, cpu.class);</span><br><span class="line">         </span><br><span class="line">         <span class="comment">//json string return</span></span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">new</span> Gson().toJson(cpuList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="5">
<li><p>Server Start</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    	ChannelFuture channelFuture = bootstrap.bind(PORT).sync();</span><br><span class="line">    	<span class="comment">//wait until the server socket is closed.</span></span><br><span class="line">    	channelFuture.channel().closeFuture().sync();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    	bossGroup.shutdownGracefully();</span><br><span class="line">    	workerGroup.shutdownGracefully();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">	<span class="keyword">new</span> HttpServer().start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="마치며"><a href="#마치며" class="headerlink" title="마치며"></a>마치며</h3><p>처음에 netty와 jersey 함께 사용하는 방법을 몰라 한참을 뱅뱅 돌았다. </p>
<p>github사이트에서 검색과 jersey github에서 netty와 연동하는 example을 clone하여 실행하였으나 많은 헛고생을했다. 그중에 큰 잘못이라 생각되는것은</p>
<ol>
<li>의존성을 체크하였으나 maven프로젝트의 상위프로젝트에 의존하고있는 라이브러리 내용을 확인하지않고 실행한것</li>
<li>example에서 제공하는 버전을 사용하지않고 임의로 최신버전을 사용한것.</li>
</ol>
<p>정리해보면 별거 간단하고, 엄청 간단한 실수들이였다.. 이걸 만드는데  사실 만드는데 1주일이란 시간이 걸렸다는게 사실 부끄럽다. 앞으로 더 집중하고 공부를 .. 계속 해야겠다..</p>
<h3 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h3><ul>
<li><a href="http://sshinbdev.tistory.com/6" target="_blank" rel="noopener">http://sshinbdev.tistory.com/6</a></li>
<li><a href="http://jdm.kr/blog/151" target="_blank" rel="noopener">http://jdm.kr/blog/151</a></li>
<li><a href="http://lucrative.tistory.com/86?category=784655" target="_blank" rel="noopener">http://lucrative.tistory.com/86?category=784655</a></li>
<li><a href="https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception-in-j?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa" target="_blank" rel="noopener">https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception-in-j?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa</a></li>
<li><a href="https://github.com/influxdata/influxdb-java" target="_blank" rel="noopener">https://github.com/influxdata/influxdb-java</a></li>
<li><a href="https://github.com/cgbystrom/jersey-netty/blob/master/src/main/java/com/sun/jersey/server/impl/container/netty/NettyHandlerContainer.java" target="_blank" rel="noopener">https://github.com/cgbystrom/jersey-netty/blob/master/src/main/java/com/sun/jersey/server/impl/container/netty/NettyHandlerContainer.java</a></li>
<li><a href="https://github.com/dagingaa/netty-jersey2/blob/master/src/main/java/com/comoyo/nettyexample/HttpServer.java" target="_blank" rel="noopener">https://github.com/dagingaa/netty-jersey2/blob/master/src/main/java/com/comoyo/nettyexample/HttpServer.java</a></li>
<li><a href="https://github.com/jersey/jersey" target="_blank" rel="noopener">https://github.com/jersey/jersey</a></li>
</ul>
<h3 id="Next"><a href="#Next" class="headerlink" title="Next"></a>Next</h3><ul>
<li>자료와 검증이된 스택 활용</li>
<li>대중적인 API서버를 벤치마킹하여 프로토콜 재설계</li>
<li>InfluxDB -&gt; AWS Cloud Watch에서 데이터 가져오기</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/techblog/categories/Dev/">Dev</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/techblog/tags/HTTP/">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/techblog/tags/InfluxDB/">InfluxDB</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/techblog/tags/JAVA8/">JAVA8</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/techblog/tags/JAVA9/">JAVA9</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/techblog/tags/Jersey/">Jersey</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/techblog/tags/Netty/">Netty</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/techblog/tags/REST/">REST</a></li></ul>

      
            
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/techblog/2018/04/25/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#소개"><span class="nav-number">1.</span> <span class="nav-text">소개</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#선행조건"><span class="nav-number">2.</span> <span class="nav-text">선행조건</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#요구사항"><span class="nav-number">3.</span> <span class="nav-text">요구사항</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#기초공부"><span class="nav-number">4.</span> <span class="nav-text">기초공부</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#프로젝트-구성"><span class="nav-number">5.</span> <span class="nav-text">프로젝트 구성</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#의존성"><span class="nav-number">6.</span> <span class="nav-text">의존성</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#개발내용"><span class="nav-number">7.</span> <span class="nav-text">개발내용</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#마치며"><span class="nav-number">8.</span> <span class="nav-text">마치며</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ref"><span class="nav-number">9.</span> <span class="nav-text">Ref</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Next"><span class="nav-number">10.</span> <span class="nav-text">Next</span></a></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2018 Tech Blog All Rights Reserved.
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/techblog/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/techblog/" class="mobile-nav-link">Home</a>
  
    <a href="/techblog/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/techblog/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/techblog/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/techblog/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/techblog/fancybox/jquery.fancybox.css">
  <script src="/techblog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/techblog/js/scripts.js"></script>
<script src="/techblog/js/bootstrap.js"></script>
<script src="/techblog/js/main.js"></script>














  <script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({theme: 'forest'});
    }
  </script>

  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="js/totop.js" async=""></script>
</body>
</html>
